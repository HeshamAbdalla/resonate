/**
 * Mobile Design Standards
 * Defines CSS custom properties for consistent mobile UX across all screen sizes
 */

:root {
    /* ============================================
     Touch Target Standards (WCAG 2.1 Level AAA)
     ============================================ */
    --touch-target-min: 44px;
    --touch-target-comfortable: 48px;
    --touch-target-spacing: 8px;

    /* ============================================
     Safe Area Insets (iOS & Android)
     For devices with notches, dynamic islands, and rounded corners
     ============================================ */
    --safe-area-top: env(safe-area-inset-top, 0px);
    --safe-area-right: env(safe-area-inset-right, 0px);
    --safe-area-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-left: env(safe-area-inset-left, 0px);

    /* ============================================
     Spacing Scale (Mobile-Optimized)
     Based on 4px base unit for consistency
     ============================================ */
    --space-1: 4px;
    /* Micro spacing */
    --space-2: 8px;
    /* Tight spacing */
    --space-3: 12px;
    /* Default spacing */
    --space-4: 16px;
    /* Comfortable spacing */
    --space-5: 20px;
    /* Generous spacing */
    --space-6: 24px;
    /* Section spacing */
    --space-8: 32px;
    /* Large section spacing */
    --space-10: 40px;
    /* Extra large spacing */
    --space-12: 48px;
    /* Hero spacing */

    /* ============================================
     Typography Scale (Mobile-First)
     Fluid typography using clamp() for responsive scaling
     ============================================ */
    --text-xs: clamp(0.75rem, 2vw, 0.875rem);
    /* 12px - 14px */
    --text-sm: clamp(0.875rem, 2.5vw, 1rem);
    /* 14px - 16px */
    --text-base: clamp(1rem, 3vw, 1.125rem);
    /* 16px - 18px */
    --text-lg: clamp(1.125rem, 3.5vw, 1.25rem);
    /* 18px - 20px */
    --text-xl: clamp(1.25rem, 4vw, 1.5rem);
    /* 20px - 24px */
    --text-2xl: clamp(1.5rem, 5vw, 2rem);
    /* 24px - 32px */
    --text-3xl: clamp(2rem, 6vw, 2.5rem);
    /* 32px - 40px */

    /* Line heights optimized for readability */
    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.6;
    --line-height-loose: 1.75;

    /* ============================================
     Mobile-Specific Dimensions
     ============================================ */
    --navbar-height-mobile: 64px;
    /* Increased from 56px for better touch targets */
    --navbar-height-desktop: 72px;
    --bottom-nav-height: 60px;
    /* For optional bottom navigation */

    /* Content max widths */
    --content-max-width-mobile: 100%;
    --content-max-width-tablet: 768px;
    --content-max-width-desktop: 1280px;

    /* ============================================
     Touch Interaction Timing
     ============================================ */
    --touch-feedback-duration: 150ms;
    --tap-delay: 0ms;
    /* Modern browsers don't need 300ms delay */

    /* ============================================
     Z-Index Scale
     ============================================ */
    --z-base: 0;
    --z-dropdown: 10;
    --z-sticky: 20;
    --z-fixed: 30;
    --z-modal-backdrop: 40;
    --z-modal: 50;
    --z-popover: 60;
    --z-tooltip: 70;
}

/* ============================================
   Mobile-First Base Styles
   ============================================ */

html {
    /* Prevent font size adjustment on orientation change (iOS) */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;

    /* Ensure base font is 16px to prevent mobile browser zoom on input focus */
    font-size: 16px;

    /* Smooth scrolling for better UX */
    scroll-behavior: smooth;
}

body {
    /* Optimized line-height for mobile readability */
    line-height: var(--line-height-relaxed);

    /* Prevent text selection on double-tap (improves UX on touch devices) */
    -webkit-tap-highlight-color: transparent;

    /* Account for safe areas */
    padding-top: var(--safe-area-top);
    padding-right: var(--safe-area-right);
    padding-bottom: var(--safe-area-bottom);
    padding-left: var(--safe-area-left);
}

/* ============================================
   Touch Target Utilities
   ============================================ */

/* Ensure all interactive elements meet minimum touch target */
.touch-target {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
}

.touch-target-comfortable {
    min-height: var(--touch-target-comfortable);
    min-width: var(--touch-target-comfortable);
}

/* Add spacing between touch targets */
.touch-target-group>*+* {
    margin-left: var(--touch-target-spacing);
}

/* ============================================
   Mobile Typography Helpers
   ============================================ */

.text-mobile-optimized {
    font-size: var(--text-base);
    line-height: var(--line-height-relaxed);
}

/* Prevent orphaned words on mobile */
.text-pretty {
    text-wrap: pretty;
}

/* Balance text for headings */
.text-balance {
    text-wrap: balance;
}

/* ============================================
   Touch Feedback States
   ============================================ */

/* Active state for touch interactions */
.touch-active:active {
    transform: scale(0.97);
    opacity: 0.9;
    transition: transform var(--touch-feedback-duration) ease-out,
        opacity var(--touch-feedback-duration) ease-out;
}

/* Prevent iOS callout menu on long press */
.no-callout {
    -webkit-touch-callout: none;
    user-select: none;
}

/* ============================================
   Safe Area Utilities
   ============================================ */

.safe-top {
    padding-top: max(var(--space-4), var(--safe-area-top));
}

.safe-bottom {
    padding-bottom: max(var(--space-4), var(--safe-area-bottom));
}

.safe-left {
    padding-left: max(var(--space-4), var(--safe-area-left));
}

.safe-right {
    padding-right: max(var(--space-4), var(--safe-area-right));
}

.safe-all {
    padding: max(var(--space-4), var(--safe-area-top)) max(var(--space-4), var(--safe-area-right)) max(var(--space-4), var(--safe-area-bottom)) max(var(--space-4), var(--safe-area-left));
}

/* ============================================
   Mobile Navigation Zone
   Bottom 1/3 of screen is the "thumb zone"
   ============================================ */

.thumb-zone {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding-bottom: var(--safe-area-bottom);
}

/* ============================================
   Responsive Spacing Utilities
   ============================================ */

@media (max-width: 640px) {

    /* Increase touch targets on smallest screens */
    .sm\:touch-target-lg {
        min-height: var(--touch-target-comfortable);
        min-width: var(--touch-target-comfortable);
    }

    /* Reduce horizontal padding on very small screens */
    .sm\:px-tight {
        padding-left: var(--space-3);
        padding-right: var(--space-3);
    }
}

/* ============================================
   Accessibility Enhancements
   ============================================ */

/* Focus visible for keyboard navigation */
*:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
}

/* Remove focus outline for mouse users */
*:focus:not(:focus-visible) {
    outline: none;
}

/* Ensure minimum contrast for text */
@media (prefers-contrast: high) {
    :root {
        --text-contrast-boost: 1.2;
    }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ============================================
   Print Styles Override
   ============================================ */

@media print {
    body {
        padding: 0 !important;
    }

    .thumb-zone,
    .touch-target,
    [class*="safe-"] {
        padding: 0 !important;
    }
}